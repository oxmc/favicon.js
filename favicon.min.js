function testImage(a){return new Promise(function(b,c){var d,e=new Image;e.onerror=e.onabort=function(){clearTimeout(d),c("error")},e.onload=function(){clearTimeout(d),b("success")},d=setTimeout(function(){e.src="//!!!!/test.jpg",c("timeout")},5000),e.src=a})}async function favicon(a,b){if(null==a||""==a)throw new Error("No icon provided!");var c=document.querySelector("link[rel~='icon']");if(c||(c=document.createElement("link"),c.rel="shortcut icon",c.type="image/gif",document.getElementsByTagName("head")[0].appendChild(c)),"base64"==(b||"png")){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(a))if(c.href=a,c.href==a)console.log(`favicon.js: favicon Set successfully!`);else throw new Error("Favicon was not set!")}else{var d=testImage(a);d.then(function(b){if("success"==b){if(c.href=a,c.href==a)console.log(`Image: ${a}, Set successfully!`);else throw new Error("Favicon was not set!");}else if("timeout"==b)throw new Error(`Image: ${a}, timedout, favicon was not set!`)},function(){throw new Error(`Image: ${a}, is an invalid image, favicon was not set!`)})}}