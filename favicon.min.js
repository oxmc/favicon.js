const base64regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;function testImage(a){return new Promise(function(b,c){var d,e=new Image;e.onerror=e.onabort=function(){clearTimeout(d),c("error")},e.onload=function(){clearTimeout(d),b("success")},d=setTimeout(function(){e.src="//!!!!/test.jpg",c("timeout")},5000),e.src=a})}async function favicon(a,b){if(null==a||""==a)throw new Error("No icon provided!");var c=b?b:base64regex.test(a)?"base64":"png";var d="ico"==c?"image/x-icon":"image/gif";var e=document.querySelector("link[rel~='icon']");if(e||(e=document.createElement("link"),e.rel="shortcut icon",e.type=d,document.getElementsByTagName("head")[0].appendChild(e)),"base64"!=c){var f=testImage(a);f.then(function(b){if("success"==b){if(e.href=a,e.href==a)console.log(`Image: ${a}, Set successfully!`);else throw new Error("Favicon was not set!");}else if("timeout"==b)throw new Error(`Image timedout: favicon was not set!`)},function(){throw new Error(`Invalid image: favicon was not set!`)})}else if(base64regex.test(a))if(e.href=a,e.href==a)console.log(`favicon.js: favicon Set successfully!`);else throw new Error("Favicon was not set!")}